{% extends 'base_index.html' %}
{% load staticfiles %}
{% block titlepage %}{{ house.name }} - CASINHA{% endblock titlepage %}

{% block css %}
<style type="text/css">
  .sizingcut{
    width: 300px;
    height: 100px;
    object-fit: cover;
    object-position: center;
  }
</style>
{% endblock css %}

{% block menuoptions %}

<ul class="nav sidebar-nav">
    <li class="dropdown">
        
        <ul id="settings-dropdown" class="dropdown-menu">
            <li>
                <a href="#" tabindex="-1">
                    Sair
                </a>
            </li>
            <li>
                <a href="#" tabindex="-1">
                    Editar perfil
                </a>
            </li>
            <li>
                <a href="#" tabindex="-1">
                    Excluir conta
                </a>
            </li>
        </ul>
    </li>
    <h5 class="center">Controle</h5>
    <li>
        <a href="#">
            <span><i class="tiny material-icons">trending_up</i></span> Gerenciar participantes
        </a>
    </li>
    <li>
        <a href="#">
            <span><i class="tiny material-icons">live_help</i></span> Gerenciar atuadores
        </a>
    </li>
    <li class="divider"></li>
    <p class="center">Detalhes de {{ house.name }}:</p>
    <p class="center" >
    <b><span><i class="tiny material-icons">supervisor_account</i></span> Participantes: </b>5 <br>
    <b><span><i class="tiny material-icons">wb_incandescent</i></span> Atuadores/Sensores: </b> 3 <br>
    <b><span><i class="tiny material-icons">network_wifi</i></span> Status: </b> conectado</p>
    <li class="divider"></li>
    <li>
        <a href="#">
            <span><i class="tiny material-icons">trending_up</i></span> Minhas estatísticas
        </a>
    </li>
    <li>
        <a href="#">
            <span><i class="tiny material-icons">live_help</i></span> Como criar um broker?
        </a>
    </li>
    <li>
        <a href="#">
            <span><i class="tiny material-icons">developer_board</i></span> Configurando atuadores
        </a>
    </li>
    <li>
        <a href="#">
            <span><i class="tiny material-icons">favorite</i></span> Contribuir com o projeto
        </a>
    </li>
</ul>
{% endblock menuoptions %}

{% block rightbody %}
    <div class="row">

    <div class="card">
    <div class="card-image waves-effect waves-block waves-light">
      <img class="activator sizingcut" src="http://materializecss.com/images/office.jpg">
    </div>
    <div class="card-tabs">
      <ul class="tabs tabs-fixed-width">
        <li class="tab"><a class="active" href="#timeline">Linha do Tempo</a></li>
        <li class="tab"><a href="#control">Painel de controle</a></li>
      </ul>
    </div>
    <div class="card-content grey lighten-4">
      <div id="timeline">
        {% for obj in messages %}
          <div class="s12">
            <div class="card-panel">
              <span class="black-text">
                <p><b>{{ obj.creator }}</b> disse:</p>
                <p>{{ obj.text }}</p>
                <p>Há: {{ obj.crated_by|timesince }}</p>
              </span>
            </div>
          </div>
        {% empty %}
          
        {% endfor %}
      </div>
      <div id="control">Test 2</div>
    </div>
  </div>
  </div>  
    <div class="fixed-action-btn" style="bottom: 45px; right: 45px;">
        <a class="btn-floating red btn-large" href="#modalAddHouse">
            <i class="material-icons left">create</i>
        </a>
    </div>
        <!-- Modal Structure -->
  <div id="modalAddHouse" class="modal">
    <div class="modal-content">
      <h4>Criar mensagem no ambiente</h4>
      <div class="row">
    
      <div class="row">
        <div class="input-field col s12">
          <i class="material-icons prefix">mode_edit</i>
          <textarea id="message" class="materialize-textarea"></textarea>
          <label for="message">Mensagem</label>
        </div>
     </div>
    </div>
    <div class="modal-footer">
        <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Cancelar</a>
        <button onclick="addMessage({{ house.pk }}, message.value);" class="waves-effect green btn-flat">Adicionar</button>
    </div>
  </div>

<script type="text/javascript">
  idHouse = {{ house.pk }}
</script>

{% endblock rightbody %}

